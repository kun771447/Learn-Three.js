# # 基本元素

## 1. scene 场景

场景是我们每个Three.js项目里面放置内容的容器，我们也可以拥有多个场景进行切换展示，你可以在场景内放置你的模型，灯光和照相机。还可以通过调整场景的位置，让场景内的所有内容都一起跟着调整位置。

### 1.1 THREE.Object3D

为了方便操作，Three.js 为了方便操作，Three.js将每个能够直接添加到场景内的对象都继承至一个基类-THREE.Object3D，以后我们将继承至这个基类的对象称为3d对象，判断一个对象是否是继承至THREE.Object3D，我们可以这么判断:

```js
obj instanceof THREE.Object3D
```

![](D:\Web\Three.js\assets\2022-06-02-20-46-17-image.png)

**注意：网格和材质不是继承于 Object 3D 对象**

**像场景添加一个 3D 对象**

```js
scene.add(mesh); // 将网格添加到场景
```

这个方法不光能够在场景内使用，而且也可以将一个3d对象添加到另一个3d对象里面:

```js
parent.add(child);
```

**获取一个 3D 对象**

```js
object3D.nane = "firstObj”;
scene.add(object3D);

scene.getobjectByMane ( "first0bj")://返回第一个匹配的3d对象
```

**删除一个 3D 对象**

如果我们想隐藏一个3d对象，而不让它显示，可以通过设置它的visible的值:

```js
mesh.visible = false; // 设置 false, 模型将不会被渲染到场景内
```

  如果一个模型不再被使用到，需要彻底删除掉，我们可以使用renove方法进行删除:

```js
scene.remove(mesh)；// 将一个模型从场景中删除
```

### 1.2 修改位置(3 种方式)

单独设置

```js
mesh.position.x = 3; // 将模型的位置调整到 x 郑州距离原点为 3 的位置
mesh.position.y += 5;
mesh.position.z -= 6;
```

一次性设置所有

```js
mesh.position.set(3, 5, -6);
```

Three.js的模型的位置属性是一个THREE.Vector3(三维向量)的对象〈后期教程会讲解相关对象)，我们可以直接重新赋值一个新的对象:

```js
mesh.position = new THREE.Vector3(3, 5, -6)
```

### 1.3 修改大小

```js
mesh.scale.x = 2; // 模型沿 x 轴放大一倍
mesh.scale.y = 0.5; // 模型沿 y 轴缩小一倍
mesh.scale.z = 1; // z 轴不变
```

```js
mesh.scale.set(2, 2, 2) 每个方向等比放大一倍
```

```js
mesh.scale = new THREE.Vector3(2, 2, 2); 
```

### 1.4 修改模型的转向

```js
mesh.rotation.x = Math.PI; // 模型沿 x 轴旋转180度
mesh.rotation.y = Math.PI * 2; // 模型沿 y 轴旋转360度
mesh.rotation.xz = Math.PI / 2; // 模型沿 z 旋转90度
```

```js
mesh.rotation.set(Math.PI, 0, -Math.PI / 2);
```

第三种方式，模型的rotation属性其实是一个欧拉角对象（YHREE,Euler）欧拉角后面会讲解到，我们可以通过重新赋值一个欧拉角对象来实现旋转调整;

```js
mesh.rotation = new THREE.Euler(Math.PI, 0, -Math.PI / 2)
```

## 2. Geometry 几何体

一个模型是由几何体Geonetry,和材质material组成。Three.js内置了很多的几何体种类，如︰立方体、三棱锥、球、八面体、十二面体、二十面体等等，这一节我们将介绍一下这些类型几何体的模型创建和几何体的通用方法。

### 2.1 Geometry 和 BufferGeometry

当前Three.js内置了这两种几何体类型Geometry和BufferGeometry，**这两个几何体类型都是用于存储模型的顶点位置、面的索引、法向量、颜色、uv纹理以及一些自定义的属性。**


**它们两个的区别是:**


- Geometry
  
  - 使用了Three.js提供的THREE.Vector3或者THREE.Color这样的对象来存储数据
  
  - 易与阅读和编辑
  
  - 性能弱一些
  
  - 适合动画场景 

- BufferGeometry
  
  - 存储故据原始
  
  - 不易阅读和编辑
  
  - 性能好
  
  - 适合存储一些放入场景内不需要再额外操作的模型



**相互转换**



BufferGeometry 转换成 Geometry

```js
// 实例化一个 Geometry 对象
const geo = new THREE.Geometry();
// 调用对象的 fromBufferCeometry 方法，并将需要转换的 bufferCeometry 传入
geo.fromBufferGeometry(bufferGeomtry);
```

Geometry 转换成 BufferGeomtry

```js
//'实例化一个Bufferceometry对象
const bufferGeo = new TEREE.Bufferceonetry();
//调用对象的fromGeometry方法,并将需要转换的geometry传入
bufferGeo.fromGeometry(geometry);
```

### 1.2 立方体

在 WebGL 里面，所有的模型都是通过三角形面组成

**创建**

```js
const geometry = new THREE.BoxGeometry(1, 1, 1);
const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
const cube = new THREE.Mesh(geometry, material);

scene.add(cube);
```

**构造函数**

```js
BoxGeometry(
    width: 浮点型, 
    height: 浮点型,
    depth: 浮点型,
    widthSegments: 整型,
    heightSegments: 整型,
    depthSegments: 整型,
);
```

- width 一沿x轴的宽度，默认值为1

- height —沿y轴的高度，默认值为1

- depth一沿z轴的深度，默认值为1

- widthSegments — 可选，沿着边的宽度的分割面的数量。默认值为1

- heightSegments — 可选，沿着边的高度的分割面的数量。默认值为1

- depthSegments 一 可选,沿着边的深度的分割面的数量。缺省值是1

**widthSegments，heightSegments，depthSegments这三个参数有点类似切西瓜，分别朝3个方向将几何体切成一块一块。**



**在线示意**

https://threejs.org/docs/scenes/geometry-browser.html#BoxGeometry

比如我们要将西瓜切成小块，必须朝三个方向切才行。

### 1.3 圆形

圆形室友多个三角形分段构成，这些三角形分段围绕一个中心点延伸并且延伸到给定坂半径外

**创建**

```js
const geometry = new THREE.CircleGecmetry(5, 32);
const material = new THREE.HeshBasicMaterial({ color: 0xfff00 });
const circle = new THREE.Mesh(geonetry, material);
scene.add( circle );
```

**构造函数**

```js
CircleGeonetry(
    radius: 浮点类型, 
    segnents: 整数类型, 
    thetastart: 浮点类型,
    thetaLength: 浮点类型
);
```

- radius — 圆的半径，默认值为 1

- segments — 段数（三角形)，最小值为3，默认值为8thetaStart一第一段的起始角度，默认值为 0

- thetaStart ― 第一段的起始角度，默认值为 0，参数是弧度

- thetaLength ― 圆形扇形的中心角，通常称为theta。默认值是2*PI，画出一个整圆，参数是弧度

https://threejs.org/docs/scenes/geometry-browser.html#CircleGeometry

### 1.4 圆锥

**创建**

```js
const geometry = new THREE.ConeGeometry( 5, 20, 32 );
const material = new THREE.MeshBasicMaterial( {color: 0xffff00} );
const cone = new THREE.Mesh( geometry, material );
scene.add( cone );
```

**构造函数**

```js
ConeGeometry(
    radius : Float, 
    height : Float, 
    radialSegments : Integer, 
    heightSegments : Integer, 
    openEnded : Boolean, 
    thetaStart : Float, 
    thetaLength : Float
)
```

- radius - 圆锥底的半径。默认值为 1。  

- height — 圆锥的高度。默认值为  1。

- radialSegments — 围绕圆锥体圆周的分段面数。默认值为 8  

- heightSegments — 沿圆锥高度的面行数。默认值为 1。  

- openEnded — 一个布尔值，指示圆锥体的底部是开放的还是封闭的。默认为 false，表示封顶。  

- thetaStart - 第一段的起始角度，默认 = 0（三点钟位置）。  

- thetaLength — 圆形扇区的中心角，通常称为 theta。默认值为 2*Pi，它构成一个完整的圆锥。
